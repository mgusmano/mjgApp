(function(a){var t=a.fn.domManip,d="_tmplitem",s=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,b={},f={},e,r={key:0,data:{}},h=0,c=0,m=[];function g(C,B,y,z){var A={data:z||(B?B.data:{}),_wrap:B?B._wrap:null,tmpl:null,parent:B||null,nodes:[],calls:w,nest:l,wrap:n,html:x,update:v};C&&a.extend(A,C,{nodes:[],parent:B});if(y){A.tmpl=y;A._ctnt=A._ctnt||A.tmpl(a,A);A.key=++h;(m.length?f:b)[h]=A}return A}a.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(z,y){a.fn[z]=function(A){var C=[],G=a(A),E,D,H,F,B=this.length===1&&this[0].parentNode;e=b||{};if(B&&B.nodeType===11&&B.childNodes.length===1&&G.length===1){G[y](this[0]);C=this}else{for(D=0,H=G.length;D<H;D++){c=D;E=(D>0?this.clone(true):this).get();a.fn[y].apply(a(G[D]),E);C=C.concat(E)}c=0;C=this.pushStack(C,z,G.selector)}F=e;e=null;a.tmpl.complete(F);return C}});a.fn.extend({tmpl:function(A,z,y){return a.tmpl(this[0],A,z,y)},tmplItem:function(){return a.tmplItem(this[0])},template:function(y){return a.template(y,this[0])},domManip:function(E,A,z){if(E[0]&&E[0].nodeType){var y=a.makeArray(arguments),B=E.length,D=0,C;while(D<B&&!(C=a.data(E[D++],"tmplItem"))){}if(B>1){y[0]=[a.makeArray(E)]}if(C&&c){y[2]=function(F){a.tmpl.afterManip(this,F,z)}}t.apply(this,y)}else{t.apply(this,arguments)}c=0;!e&&a.tmpl.complete(b);return this}});a.extend({tmpl:function(B,D,C,A){var y,z=!A;if(z){A=r;B=a.template[B]||a.template(null,B);f={}}else{if(!B){B=A.tmpl;b[A.key]=A;A.nodes=[];A.wrapped&&p(A,A.wrapped);return a(i(A,null,A.tmpl(a,A)))}}if(!B){return[]}if(typeof D==="function"){D=D.call(A||{})}C&&C.wrapped&&p(C,C.wrapped);y=a.isArray(D)?a.map(D,function(E){return E?g(C,A,B,E):null}):[g(C,A,B,D)];return z?a(i(A,null,y)):y},tmplItem:function(y){var z;if(y instanceof a){y=y[0]}while(y&&y.nodeType===1&&!(z=a.data(y,"tmplItem"))&&(y=y.parentNode)){}return z||r},template:function(z,y){if(y){if(typeof y==="string"){y=q(y)}else{if(y instanceof a){y=y[0]||{}}}if(y.nodeType){y=a.data(y,"tmpl")||a.data(y,"tmpl",q(y.innerHTML))}return typeof z==="string"?(a.template[z]=y):y}return z?typeof z!=="string"?a.template(null,z):a.template[z]||a.template(null,s.test(z)?z:a(z)):null},encode:function(y){return(""+y).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});a.extend(a.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode($1a));}"},"!":{open:""}},complete:function(){b={}},afterManip:function(B,y,z){var A=y.nodeType===11?a.makeArray(y.childNodes):y.nodeType===1?[y]:[];z.call(B,y);o(A);c++}});function i(A,C,B){var y,z=B?a.map(B,function(D){return typeof D==="string"?A.key?D.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+d+'="'+A.key+'" $2'):D:i(D,A,D._ctnt)}):A;if(C){return z}z=z.join("");z.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(D,E,G,F){y=a(G).get();o(y);if(E){y=j(E).concat(y)}if(F){y=y.concat(j(F))}});return y?y:j(z)}function j(z){var y=document.createElement("div");y.innerHTML=z;return a.makeArray(y.childNodes)}function q(y){return new Function("jQuery","$item","var $=jQuery,call,_=[],$data=$item.data;with($data){_.push('"+a.trim(y).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(E,D,C,H,F,G,I){var B=a.tmpl.tag[C],A,J,z;if(!B){throw"Template command not found: "+C}A=B._default||[];if(G&&!/\w$/.test(F)){F+=G;G=""}if(F){F=k(F);I=I?","+k(I)+")":G?")":"";J=G?F.indexOf(".")>-1?F+G:"("+F+").call($item"+I:F;z=G?J:"(typeof("+F+")==='function'?("+F+").call($item):("+F+"))"}else{z=J=A.$1||"null"}H=k(H);return"');"+B[D?"close":"open"].split("$notnull_1").join(F?"typeof("+F+")!=='undefined' && ("+F+")!=null":"true").split("$1a").join(z).split("$1").join(J).split("$2").join(H?H.replace(/\s*([^\(]+)\s*(\((.*?)\))?/g,function(L,K,N,M){M=M?","+M+")":N?")":"";return M?"("+K+").call($item"+M:L}):A.$2||"")+"_.push('"})+"');}return _;")}function p(z,y){z._wrap=i(z,true,a.isArray(y)?y:[s.test(y)?y:a(y).html()]).join("")}function k(y){return y?y.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function u(z){var y=document.createElement("div");y.appendChild(z.cloneNode(true));return y.innerHTML}function o(F){var E="_"+c,B,A,C={},y,G,z;for(y=0,G=F.length;y<G;y++){if((B=F[y]).nodeType!==1){continue}A=B.getElementsByTagName("*");for(z=A.length-1;z>=0;z--){D(A[z])}D(B)}function D(M){var J,L=M,N,K,I;if(I=M.getAttribute(d)){while(L.parentNode&&(L=L.parentNode).nodeType===1&&!(J=L.getAttribute(d))){}if(J!==I){L=L.parentNode?L.nodeType===11?0:L.getAttribute(d)||0:0;if(!(K=b[I])){K=f[I];K=g(K,b[L]||f[L],null,true);K.key=++h;b[h]=K}c&&H(I)}M.removeAttribute(d)}else{if(c&&(K=a.data(M,"tmplItem"))){H(K.key);b[K.key]=K;L=a.data(M.parentNode,"tmplItem");L=L?L.key:0}}if(K){N=K;while(N&&N.key!=L){N.nodes.push(M);N=N.parent}delete K._ctnt;delete K._wrap;a.data(M,"tmplItem",K)}function H(O){O=O+E;K=C[O]=C[O]||g(K,b[K.parent.key+E]||K.parent,null,true)}}}function w(A,z,y,B){if(!A){return m.pop()}m.push({_:A,tmpl:z,item:this,data:y,options:B})}function l(A,z,y){return a.tmpl(a.template(A),z,y,this)}function n(y,A){var z=y.options||{};z.wrapped=A;return a.tmpl(a.template(y.tmpl),y.data,z,y.item)}function x(A,z){var y=this._wrap;return a.map(a(a.isArray(y)?y.join(""):y).filter(A||"*"),function(B){return z?B.innerText||B.textContent:B.outerHTML||u(B)})}function v(){var y=this.nodes;a.tmpl(null,null,null,this).insertBefore(y[0]);a(y).remove()}})(jQuery);